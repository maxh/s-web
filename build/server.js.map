{"version":3,"sources":["webpack:///server.js","webpack:///webpack/bootstrap 879f6666a7cfeb3431ad","webpack:///./server/index.js","webpack:///./server/infra/net.js","webpack:///./server/settings.js","webpack:///external \"express\"","webpack:///./server/infra/google-auth.js","webpack:///./settings.js","webpack:///external \"googleapis\"","webpack:///./server/routes/auth.js","webpack:///./server/routes/permissions.js","webpack:///./keys/keys.json","webpack:///external \"body-parser\"","webpack:///external \"cookie-parser\"","webpack:///external \"cookie-session\"","webpack:///external \"crypto\"","webpack:///external \"isomorphic-fetch\"","webpack:///external \"morgan\"","webpack:///external \"query-string\"","webpack:///external \"request\""],"names":["require","install","modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","_bodyParser","_bodyParser2","_express","_express2","_cookieParser","_cookieParser2","_cookieSession","_cookieSession2","_morgan","_morgan2","_auth","_auth2","_permissions","_permissions2","_settings","_settings2","app","use","secret","keys","scoutWebSessionKey","isDev","static","forceHttpsUnlessDev","req","res","next","isHeroku","header","redirect","url","json","listen","port","console","log","Object","defineProperty","value","fetchJson","endpoint","undefined","fn","wrapper","sendClientError","message","status","error","promise","Promise","resolve","reject","e","then","result","headersSent","catch","send","options","fetch","response","ok","Error","JSON","stringify","process","env","AUTH_KEYS","parse","getProfile","getTokenInfo","getTokensFromCode","_net","oauth2Client","code","getToken","err","tokens","refreshToken","refresh_token","accessToken","access_token","accessTokenExpiration","expiry_date","INFO_URL","google_apiKey","settings","NODE_ENV","PORT","serverUrl","clientServerUrl","scoutServiceUrl","HOSTNAME","_interopRequireWildcard","newObj","key","prototype","hasOwnProperty","_slicedToArray","sliceIterator","arr","i","_arr","_n","_d","_e","_s","_i","Symbol","iterator","done","push","length","Array","isArray","TypeError","_googleapis","_googleapis2","_googleAuth","googleAuth","OAuth2","auth","REDIRECT_PATH","google_clientId","google_clientSecret","INITIAL_SCOPES","NO_REFRESH_TOKEN","getJwtPromise","params","scoutWebServerSecret","method","body","headers","content-type","jwt","router","Router","get","destination","query","session","generateAuthUrl","access_type","scope","tokensPromise","scopesPromise","tokenInfo","split","profilePromise","promises","all","jwtPromise","values","_values","scopes","profile","googleId","email","emails","name","displayName","cookie","forceRefreshUrl","prompt","_crypto","_crypto2","_queryString","_queryString2","_request","_request2","setPermission","provider","providerInfo","authorization","redirectPath","_req$query","cookies","savedState","randomBytes","toString","state","_req$query2","_req$session","tokenInfoPromise","permissionPromise","dropboxRedirectUri","client_id","dropbox_clientId","redirect_uri","response_type","stringified","_req$query3","_req$session2","destinationUrl","tokenPromise","post","form","grant_type","user","pass","dropbox_clientSecret","reqError","token","accountId","account_id","dark_sky","gmaps","nyt","jwtSecret"],"mappings":"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","file":"server.js","sourcesContent":["require(\"source-map-support\").install();\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _bodyParser = __webpack_require__(10);\n\t\n\tvar _bodyParser2 = _interopRequireDefault(_bodyParser);\n\t\n\tvar _express = __webpack_require__(3);\n\t\n\tvar _express2 = _interopRequireDefault(_express);\n\t\n\tvar _cookieParser = __webpack_require__(11);\n\t\n\tvar _cookieParser2 = _interopRequireDefault(_cookieParser);\n\t\n\tvar _cookieSession = __webpack_require__(12);\n\t\n\tvar _cookieSession2 = _interopRequireDefault(_cookieSession);\n\t\n\tvar _morgan = __webpack_require__(15);\n\t\n\tvar _morgan2 = _interopRequireDefault(_morgan);\n\t\n\tvar _auth = __webpack_require__(7);\n\t\n\tvar _auth2 = _interopRequireDefault(_auth);\n\t\n\tvar _permissions = __webpack_require__(8);\n\t\n\tvar _permissions2 = _interopRequireDefault(_permissions);\n\t\n\tvar _settings = __webpack_require__(2);\n\t\n\tvar _settings2 = _interopRequireDefault(_settings);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar app = (0, _express2.default)();\n\t\n\tapp.use((0, _cookieParser2.default)());\n\tapp.use((0, _cookieSession2.default)({ secret: _settings2.default.keys.scoutWebSessionKey }));\n\t\n\tif (!_settings2.default.isDev) {\n\t  app.use(_express2.default.static('client/build'));\n\t}\n\t\n\tvar forceHttpsUnlessDev = function forceHttpsUnlessDev(req, res, next) {\n\t  if (!_settings2.default.isDev && _settings2.default.isHeroku && req.header('x-forwarded-proto') !== 'https') {\n\t    return res.redirect('https://' + req.header('host') + req.url);\n\t  }\n\t  return next();\n\t};\n\tapp.use(forceHttpsUnlessDev);\n\tapp.use(_bodyParser2.default.json());\n\tapp.use((0, _morgan2.default)('combined'));\n\t\n\tapp.use('/auth', _auth2.default);\n\tapp.use('/permissions', _permissions2.default);\n\t\n\tapp.listen(_settings2.default.port, function () {\n\t  // eslint-disable-next-line no-console\n\t  console.log('Server listening on: ', _settings2.default.port);\n\t});\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.fetchJson = exports.endpoint = undefined;\n\t\n\t__webpack_require__(14);\n\t\n\t// A handler wrapper that allows handlers to return promises\n\t// instead of dealing with req and res. Also, centralizes\n\t// rejection and error handling and attaches convenience methods.\n\tvar endpoint = exports.endpoint = function endpoint(fn) {\n\t  var wrapper = function wrapper(req, res) {\n\t    // Attach a convenience function to send a JSON client error.\n\t    res.sendClientError = function (message) {\n\t      // eslint-disable-line no-param-reassign\n\t      return res.status(400).json({ error: message });\n\t    };\n\t\n\t    // Catch errors in the form of a rejected promise.\n\t    var promise = new Promise(function (resolve, reject) {\n\t      try {\n\t        resolve(fn(req, res));\n\t      } catch (e) {\n\t        reject(e);\n\t      }\n\t    });\n\t\n\t    // Ensure a response is sent.\n\t    promise.then(function (result) {\n\t      if (!res.headersSent) {\n\t        if (!result) {\n\t          result = {}; // Empty response => success!\n\t        }\n\t        return res.status(200).json(result);\n\t      }\n\t    }).catch(function (error) {\n\t      // eslint-disable-next-line no-console\n\t      console.error('Error in handler:\\n', error);\n\t      if (!res.headersSent) {\n\t        return res.status(500).send({ error: 'Internal server error.' });\n\t      }\n\t    });\n\t  };\n\t\n\t  return wrapper;\n\t}; // Networking utilities.\n\t\n\tvar fetchJson = exports.fetchJson = function fetchJson(url, options) {\n\t  return fetch(url, options).then(function (response) {\n\t    return response.json().then(function (json) {\n\t      if (!response.ok) {\n\t        throw Error(JSON.stringify(json));\n\t      }\n\t      return json;\n\t    });\n\t  });\n\t};\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _settings = __webpack_require__(5);\n\t\n\tvar _settings2 = _interopRequireDefault(_settings);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tif (process.env.AUTH_KEYS) {\n\t  _settings2.default.keys = JSON.parse(process.env.AUTH_KEYS);\n\t} else {\n\t  // eslint-disable-next-line global-require\n\t  _settings2.default.keys = __webpack_require__(9);\n\t}\n\t\n\texports.default = _settings2.default;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"express\");\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.getProfile = exports.getTokenInfo = exports.getTokensFromCode = undefined;\n\t\n\tvar _settings = __webpack_require__(2);\n\t\n\tvar _settings2 = _interopRequireDefault(_settings);\n\t\n\tvar _net = __webpack_require__(1);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar getTokensFromCode = exports.getTokensFromCode = function getTokensFromCode(oauth2Client) {\n\t  return function (code) {\n\t    return new Promise(function (resolve, reject) {\n\t      oauth2Client.getToken(code, function (err, tokens) {\n\t        if (err) {\n\t          reject(err);\n\t          return;\n\t        }\n\t        resolve({\n\t          refreshToken: tokens.refresh_token,\n\t          accessToken: tokens.access_token,\n\t          accessTokenExpiration: tokens.expiry_date / 1000 });\n\t      });\n\t    });\n\t  };\n\t};\n\t\n\tvar getTokenInfo = exports.getTokenInfo = function getTokenInfo(accessToken) {\n\t  var INFO_URL = 'https://www.googleapis.com/oauth2/v3/tokeninfo';\n\t  var url = INFO_URL + '?access_token=' + accessToken;\n\t  return (0, _net.fetchJson)(url);\n\t};\n\t\n\tvar getProfile = exports.getProfile = function getProfile(accessToken) {\n\t  var url = 'https://www.googleapis.com/plus/v1/people/me';\n\t  url += '?access_token=' + accessToken;\n\t  url += '&key=' + _settings2.default.keys.google_apiKey;\n\t  return (0, _net.fetchJson)(url);\n\t};\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\tconst settings = {};\n\t\n\tsettings.isDev = !(process.env.NODE_ENV === 'production' || process.env.NODE_ENV === 'staging');\n\tsettings.isHeroku = process.env.PORT;\n\t\n\tif (settings.isDev) {\n\t  settings.port = 3001;\n\t  settings.serverUrl = 'http://localhost:' + settings.port;\n\t  settings.clientServerUrl = 'http://localhost:3000';  // React's dev server uses different port.\n\t  settings.scoutServiceUrl = 'http://localhost:5000';\n\t} else {\n\t  if (settings.isHeroku) {\n\t    // Actual prod.\n\t    settings.port = process.env.PORT;\n\t    settings.serverUrl = 'https://' + process.env.HOSTNAME;\n\t    settings.scoutServiceUrl = 'https://scout-service.herokuapp.com';\n\t  } else {\n\t    // Compiled prod run locally.\n\t    settings.port = 3001;\n\t    settings.serverUrl = 'http://localhost:3001';\n\t    settings.scoutServiceUrl = 'http://localhost:5000';\n\t  }\n\t  settings.clientServerUrl = settings.serverUrl;\n\t}\n\t\n\tmodule.exports = settings;\n\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"googleapis\");\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\t\n\tvar _express = __webpack_require__(3);\n\t\n\tvar _express2 = _interopRequireDefault(_express);\n\t\n\tvar _googleapis = __webpack_require__(6);\n\t\n\tvar _googleapis2 = _interopRequireDefault(_googleapis);\n\t\n\tvar _googleAuth = __webpack_require__(4);\n\t\n\tvar googleAuth = _interopRequireWildcard(_googleAuth);\n\t\n\tvar _net = __webpack_require__(1);\n\t\n\tvar _settings = __webpack_require__(2);\n\t\n\tvar _settings2 = _interopRequireDefault(_settings);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar OAuth2 = _googleapis2.default.auth.OAuth2;\n\t\n\tvar REDIRECT_PATH = '/auth/callback';\n\tvar oauth2Client = new OAuth2(_settings2.default.keys.google_clientId, _settings2.default.keys.google_clientSecret, _settings2.default.serverUrl + REDIRECT_PATH);\n\tvar getTokensFromCode = googleAuth.getTokensFromCode(oauth2Client);\n\t\n\tvar INITIAL_SCOPES = ['https://www.googleapis.com/auth/userinfo.profile', 'https://www.googleapis.com/auth/userinfo.email'];\n\t\n\tvar NO_REFRESH_TOKEN = 'No refresh token!';\n\t\n\tvar getJwtPromise = function getJwtPromise(params) {\n\t  var url = _settings2.default.scoutServiceUrl + '/auth/jwt/fromtokens';\n\t  params.scoutWebServerSecret = _settings2.default.keys.scoutWebServerSecret;\n\t  var options = {\n\t    method: 'POST',\n\t    body: JSON.stringify(params),\n\t    headers: { 'content-type': 'application/json' }\n\t  };\n\t  // Use raw fetch instead of fetchJson to handle the NO_REFRESH_TOKEN case.\n\t  return fetch(url, options, false).then(function (response) {\n\t    return response.json().then(function (json) {\n\t      if (!response.ok) {\n\t        throw Error(json.error); // Might be NO_REFRESH_TOKEN\n\t      }\n\t      return json.jwt;\n\t    });\n\t  });\n\t};\n\t\n\tvar router = _express2.default.Router();\n\t\n\trouter.get('/sign-in', (0, _net.endpoint)(function (req, res) {\n\t  var destination = req.query.destination;\n\t\n\t  req.session.destination = destination;\n\t\n\t  var url = oauth2Client.generateAuthUrl({\n\t    access_type: 'offline',\n\t    scope: INITIAL_SCOPES\n\t  });\n\t\n\t  return res.redirect(url);\n\t}));\n\t\n\trouter.get('/callback', (0, _net.endpoint)(function (req, res) {\n\t  var code = req.query.code;\n\t  var destination = req.session.destination;\n\t\n\t\n\t  var tokensPromise = getTokensFromCode(code);\n\t  var scopesPromise = tokensPromise.then(function (tokens) {\n\t    return googleAuth.getTokenInfo(tokens.accessToken);\n\t  }).then(function (tokenInfo) {\n\t    return tokenInfo.scope.split(' ');\n\t  });\n\t  var profilePromise = tokensPromise.then(function (tokens) {\n\t    return googleAuth.getProfile(tokens.accessToken);\n\t  });\n\t\n\t  var promises = Promise.all([tokensPromise, scopesPromise, profilePromise]);\n\t\n\t  var jwtPromise = promises.then(function (values) {\n\t    var _values = _slicedToArray(values, 3),\n\t        tokens = _values[0],\n\t        scopes = _values[1],\n\t        profile = _values[2];\n\t\n\t    var params = {\n\t      googleId: profile.id,\n\t      email: profile.emails[0].value,\n\t      name: profile.displayName,\n\t      scopes: scopes,\n\t      tokens: tokens\n\t    };\n\t    return getJwtPromise(params);\n\t  });\n\t\n\t  return jwtPromise.then(function (jwt) {\n\t    res.session = null;\n\t    res.cookie('jwt', jwt);\n\t    res.redirect(_settings2.default.clientServerUrl + destination);\n\t  }).catch(function (error) {\n\t    if (error.message === NO_REFRESH_TOKEN) {\n\t      var forceRefreshUrl = oauth2Client.generateAuthUrl({\n\t        access_type: 'offline',\n\t        prompt: 'consent',\n\t        scope: INITIAL_SCOPES\n\t      });\n\t      res.redirect(forceRefreshUrl);\n\t    }\n\t    // eslint-disable-next-line no-console\n\t    console.error('Error signing in: ', error);\n\t  });\n\t}));\n\t\n\texports.default = router;\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }(); // Permissions for third-party services.\n\t\n\t// We do this here instead of in scout-service because we cannot pass JWT to\n\t\n\tvar _crypto = __webpack_require__(13);\n\t\n\tvar _crypto2 = _interopRequireDefault(_crypto);\n\t\n\tvar _express = __webpack_require__(3);\n\t\n\tvar _express2 = _interopRequireDefault(_express);\n\t\n\tvar _googleapis = __webpack_require__(6);\n\t\n\tvar _googleapis2 = _interopRequireDefault(_googleapis);\n\t\n\tvar _queryString = __webpack_require__(16);\n\t\n\tvar _queryString2 = _interopRequireDefault(_queryString);\n\t\n\tvar _request = __webpack_require__(17);\n\t\n\tvar _request2 = _interopRequireDefault(_request);\n\t\n\tvar _googleAuth = __webpack_require__(4);\n\t\n\tvar googleAuth = _interopRequireWildcard(_googleAuth);\n\t\n\tvar _net = __webpack_require__(1);\n\t\n\tvar _settings = __webpack_require__(5);\n\t\n\tvar _settings2 = _interopRequireDefault(_settings);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar OAuth2 = _googleapis2.default.auth.OAuth2;\n\t\n\t// Permissions for third-party services.\n\t\n\t\n\tvar router = _express2.default.Router();\n\t\n\tvar setPermission = function setPermission(jwt, provider, providerInfo) {\n\t  var params = {\n\t    scoutWebServerSecret: _settings2.default.keys.scoutWebServerSecret,\n\t    provider: provider,\n\t    providerInfo: providerInfo\n\t  };\n\t  var options = {\n\t    method: 'PATCH',\n\t    body: JSON.stringify(params),\n\t    headers: {\n\t      'content-type': 'application/json',\n\t      authorization: 'Scout JWT ' + jwt\n\t    }\n\t  };\n\t  var url = _settings2.default.scoutServiceUrl + '/api/permissions/';\n\t  return (0, _net.fetchJson)(url, options).then(function () {\n\t    return {};\n\t  });\n\t};\n\t\n\t// Google permissions.\n\t\n\t\n\tvar redirectPath = '/permissions/callback/google';\n\tvar oauth2Client = new OAuth2(_settings2.default.keys.google_clientId, _settings2.default.keys.google_clientSecret, _settings2.default.serverUrl + redirectPath);\n\tvar getTokensFromCode = googleAuth.getTokensFromCode(oauth2Client);\n\t\n\trouter.get('/google', (0, _net.endpoint)(function (req, res) {\n\t  var _req$query = req.query,\n\t      destination = _req$query.destination,\n\t      providerInfo = _req$query.providerInfo;\n\t\n\t\n\t  req.session.destination = destination;\n\t  req.session.jwt = req.cookies.jwt;\n\t  req.session.savedState = _crypto2.default.randomBytes(20).toString('hex');\n\t\n\t  var scopes = JSON.parse(providerInfo).scopes;\n\t\n\t  var url = oauth2Client.generateAuthUrl({\n\t    access_type: 'offline',\n\t    prompt: 'consent',\n\t    scope: scopes,\n\t    state: req.session.savedState\n\t  });\n\t\n\t  return res.redirect(url);\n\t}));\n\t\n\t// Note: Does NOT require an auth header.\n\trouter.get('/callback/google', (0, _net.endpoint)(function (req, res) {\n\t  var _req$query2 = req.query,\n\t      code = _req$query2.code,\n\t      error = _req$query2.error,\n\t      state = _req$query2.state;\n\t  var _req$session = req.session,\n\t      jwt = _req$session.jwt,\n\t      destination = _req$session.destination,\n\t      savedState = _req$session.savedState;\n\t\n\t  req.session = null;\n\t\n\t  var next = function next() {\n\t    return res.redirect(_settings2.default.clientServerUrl + destination);\n\t  };\n\t  if (error || savedState !== state) {\n\t    next();\n\t  }\n\t\n\t  var tokensPromise = getTokensFromCode(code);\n\t  var tokenInfoPromise = tokensPromise.then(function (tokens) {\n\t    return googleAuth.getTokenInfo(tokens.accessToken);\n\t  });\n\t  var promises = Promise.all([tokensPromise, tokenInfoPromise]);\n\t\n\t  var permissionPromise = promises.then(function (values) {\n\t    var _values = _slicedToArray(values, 2),\n\t        tokens = _values[0],\n\t        tokenInfo = _values[1];\n\t\n\t    var providerInfo = {\n\t      scopes: tokenInfo.scope.split(' '),\n\t      accessToken: tokens.accessToken,\n\t      refreshToken: tokens.refreshToken,\n\t      accessTokenExpiration: tokens.accessTokenExpiration\n\t    };\n\t    return setPermission(jwt, 'google', providerInfo);\n\t  });\n\t\n\t  return permissionPromise.then(next).catch(next);\n\t}));\n\t\n\t// Dropbox permissions.\n\t\n\tvar dropboxRedirectUri = _settings2.default.serverUrl + '/permissions/callback/dropbox';\n\trouter.get('/dropbox', (0, _net.endpoint)(function (req, res) {\n\t  var destination = req.query.destination;\n\t\n\t\n\t  req.session.destination = destination;\n\t  req.session.jwt = req.cookies.jwt;\n\t  req.session.savedState = _crypto2.default.randomBytes(20).toString('hex');\n\t\n\t  var params = {\n\t    client_id: _settings2.default.keys.dropbox_clientId,\n\t    redirect_uri: dropboxRedirectUri,\n\t    response_type: 'code',\n\t    state: req.session.savedState\n\t  };\n\t  var stringified = _queryString2.default.stringify(params);\n\t  var url = 'https://www.dropbox.com/oauth2/authorize?' + stringified;\n\t\n\t  return res.redirect(url);\n\t}));\n\t\n\t// Note: Does NOT require an auth header.\n\trouter.get('/callback/dropbox', (0, _net.endpoint)(function (req, res) {\n\t  var _req$query3 = req.query,\n\t      code = _req$query3.code,\n\t      state = _req$query3.state,\n\t      error = _req$query3.error;\n\t  var _req$session2 = req.session,\n\t      jwt = _req$session2.jwt,\n\t      destination = _req$session2.destination,\n\t      savedState = _req$session2.savedState;\n\t\n\t  req.session = null;\n\t\n\t  var destinationUrl = _settings2.default.clientServerUrl + destination;\n\t  if (error || savedState !== state) {\n\t    res.redirect(destinationUrl);\n\t  }\n\t\n\t  var tokenPromise = new Promise(function (resolve, reject) {\n\t    _request2.default.post('https://api.dropbox.com/1/oauth2/token', {\n\t      form: {\n\t        code: code,\n\t        grant_type: 'authorization_code',\n\t        redirect_uri: dropboxRedirectUri\n\t      },\n\t      auth: {\n\t        user: _settings2.default.keys.dropbox_clientId,\n\t        pass: _settings2.default.keys.dropbox_clientSecret\n\t      }\n\t    }, function (reqError, response, body) {\n\t      if (reqError) {\n\t        reject(reqError);\n\t        return;\n\t      }\n\t      resolve(JSON.parse(body));\n\t    });\n\t  });\n\t\n\t  return tokenPromise.then(function (token) {\n\t    var providerInfo = {\n\t      accessToken: token.access_token,\n\t      accountId: token.account_id\n\t    };\n\t    return setPermission(jwt, 'dropbox', providerInfo);\n\t  }).then(function () {\n\t    return res.redirect(destinationUrl);\n\t  }).catch(function (err) {\n\t    return res.redirect(destinationUrl + '?error=' + err);\n\t  });\n\t}));\n\t\n\texports.default = router;\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\tmodule.exports = {\n\t\t\"dark_sky\": \"61ae0da07a6ba575cf52b3a183bbcbbd\",\n\t\t\"gmaps\": \"AIzaSyCaXnRt4J82cRuseQR98IngQJRyMJCPnWw\",\n\t\t\"nyt\": \"3060d0e08cb9494f8ff10db9461552f6\",\n\t\t\"google_clientId\": \"447160699625-cuvgvmtcfpl1c1jehq9dntcd1sgomi3g.apps.googleusercontent.com\",\n\t\t\"google_clientSecret\": \"1dhLvo_grF0yCM_XVM8OyogN\",\n\t\t\"google_apiKey\": \"AIzaSyCaXnRt4J82cRuseQR98IngQJRyMJCPnWw\",\n\t\t\"dropbox_clientId\": \"dg3od5r6l2xuy1a\",\n\t\t\"dropbox_clientSecret\": \"1at9hla0qjies73\",\n\t\t\"jwtSecret\": \"cNWBAsajXfBhbFZ0sQsGfQVkIlzslJh5WEmOEDOts421O7AvEsVfyVuihTb\",\n\t\t\"scoutWebServerSecret\": \"sSkCNyf93qA5ZNG9GHbBDFTMLrWx9DMjRodCN9oFb90hicys06zj8lmxbbvA\",\n\t\t\"scoutWebSessionKey\": \"CtBjTxYgz6cMCeaMXNYFrfGa5WTcQwgNs7C0T2JYEzcURmzXuwMXUc1e8IRptHkBKDHTR0rTvllNBxhP\"\n\t};\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"body-parser\");\n\n/***/ },\n/* 11 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"cookie-parser\");\n\n/***/ },\n/* 12 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"cookie-session\");\n\n/***/ },\n/* 13 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"crypto\");\n\n/***/ },\n/* 14 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"isomorphic-fetch\");\n\n/***/ },\n/* 15 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"morgan\");\n\n/***/ },\n/* 16 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"query-string\");\n\n/***/ },\n/* 17 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"request\");\n\n/***/ }\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// server.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 879f6666a7cfeb3431ad","import bodyParser from 'body-parser';\nimport express from 'express';\nimport cookieParser from 'cookie-parser';\nimport cookieSession from 'cookie-session';\nimport morgan from 'morgan';\n\nimport auth from './routes/auth';\nimport permissions from './routes/permissions';\n\nimport settings from './settings';\n\n\nconst app = express();\n\napp.use(cookieParser());\napp.use(cookieSession({ secret: settings.keys.scoutWebSessionKey }));\n\nif (!settings.isDev) {\n  app.use(express.static('client/build'));\n}\n\nconst forceHttpsUnlessDev = (req, res, next) => {\n  if (!settings.isDev && settings.isHeroku &&\n      req.header('x-forwarded-proto') !== 'https') {\n    return res.redirect(`https://${req.header('host')}${req.url}`);\n  }\n  return next();\n};\napp.use(forceHttpsUnlessDev);\napp.use(bodyParser.json());\napp.use(morgan('combined'));\n\napp.use('/auth', auth);\napp.use('/permissions', permissions);\n\napp.listen(settings.port, () => {\n  // eslint-disable-next-line no-console\n  console.log('Server listening on: ', settings.port);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./server/index.js","// Networking utilities.\n\nimport 'isomorphic-fetch';\n\n\n// A handler wrapper that allows handlers to return promises\n// instead of dealing with req and res. Also, centralizes\n// rejection and error handling and attaches convenience methods.\nexport const endpoint = (fn) => {\n  const wrapper = (req, res) => {\n    // Attach a convenience function to send a JSON client error.\n    res.sendClientError = (message) => {  // eslint-disable-line no-param-reassign\n      return res.status(400).json({ error: message });\n    };\n\n    // Catch errors in the form of a rejected promise.\n    const promise = new Promise((resolve, reject) => {\n      try {\n        resolve(fn(req, res));\n      } catch (e) {\n        reject(e);\n      }\n    });\n\n    // Ensure a response is sent.\n    promise.then((result) => {\n      if (!res.headersSent) {\n        if (!result) {\n          result = {};  // Empty response => success!\n        }\n        return res.status(200).json(result);\n      }\n    }).catch((error) => {\n      // eslint-disable-next-line no-console\n      console.error('Error in handler:\\n', error);\n      if (!res.headersSent) {\n        return res.status(500).send({ error: 'Internal server error.' });\n      }\n    });\n  };\n\n  return wrapper;\n};\n\n\nexport const fetchJson = (url, options) => {\n  return fetch(url, options).then((response) => {\n    return response.json().then((json) => {\n      if (!response.ok) {\n        throw Error(JSON.stringify(json));\n      }\n      return json;\n    });\n  });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./server/infra/net.js","import settings from '../settings';\n\n\nif (process.env.AUTH_KEYS) {\n  settings.keys = JSON.parse(process.env.AUTH_KEYS);\n} else {\n  // eslint-disable-next-line global-require\n  settings.keys = require('../keys/keys.json');\n}\n\nexport default settings;\n\n\n\n// WEBPACK FOOTER //\n// ./server/settings.js","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 3\n// module chunks = 0","import settings from '../settings';\nimport { fetchJson } from './net';\n\n\nexport const getTokensFromCode = oauth2Client => (code) => {\n  return new Promise((resolve, reject) => {\n    oauth2Client.getToken(code, (err, tokens) => {\n      if (err) {\n        reject(err);\n        return;\n      }\n      resolve({\n        refreshToken: tokens.refresh_token,\n        accessToken: tokens.access_token,\n        accessTokenExpiration: tokens.expiry_date / 1000,  // ms => secs\n      });\n    });\n  });\n};\n\n\nexport const getTokenInfo = (accessToken) => {\n  const INFO_URL = 'https://www.googleapis.com/oauth2/v3/tokeninfo';\n  const url = `${INFO_URL}?access_token=${accessToken}`;\n  return fetchJson(url);\n};\n\n\nexport const getProfile = (accessToken) => {\n  let url = 'https://www.googleapis.com/plus/v1/people/me';\n  url += `?access_token=${accessToken}`;\n  url += `&key=${settings.keys.google_apiKey}`;\n  return fetchJson(url);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./server/infra/google-auth.js","const settings = {};\n\nsettings.isDev = !(process.env.NODE_ENV === 'production' || process.env.NODE_ENV === 'staging');\nsettings.isHeroku = process.env.PORT;\n\nif (settings.isDev) {\n  settings.port = 3001;\n  settings.serverUrl = 'http://localhost:' + settings.port;\n  settings.clientServerUrl = 'http://localhost:3000';  // React's dev server uses different port.\n  settings.scoutServiceUrl = 'http://localhost:5000';\n} else {\n  if (settings.isHeroku) {\n    // Actual prod.\n    settings.port = process.env.PORT;\n    settings.serverUrl = 'https://' + process.env.HOSTNAME;\n    settings.scoutServiceUrl = 'https://scout-service.herokuapp.com';\n  } else {\n    // Compiled prod run locally.\n    settings.port = 3001;\n    settings.serverUrl = 'http://localhost:3001';\n    settings.scoutServiceUrl = 'http://localhost:5000';\n  }\n  settings.clientServerUrl = settings.serverUrl;\n}\n\nmodule.exports = settings;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./settings.js\n// module id = 5\n// module chunks = 0","module.exports = require(\"googleapis\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"googleapis\"\n// module id = 6\n// module chunks = 0","import express from 'express';\nimport google from 'googleapis';\n\nimport * as googleAuth from '../infra/google-auth';\nimport { endpoint } from '../infra/net';\nimport settings from '../settings';\n\n\nconst OAuth2 = google.auth.OAuth2;\n\nconst REDIRECT_PATH = '/auth/callback';\nconst oauth2Client = new OAuth2(\n  settings.keys.google_clientId,\n  settings.keys.google_clientSecret,\n  settings.serverUrl + REDIRECT_PATH,\n);\nconst getTokensFromCode = googleAuth.getTokensFromCode(oauth2Client);\n\nconst INITIAL_SCOPES = [\n  'https://www.googleapis.com/auth/userinfo.profile',\n  'https://www.googleapis.com/auth/userinfo.email',\n];\n\nconst NO_REFRESH_TOKEN = 'No refresh token!';\n\n\nconst getJwtPromise = (params) => {\n  const url = `${settings.scoutServiceUrl}/auth/jwt/fromtokens`;\n  params.scoutWebServerSecret = settings.keys.scoutWebServerSecret;\n  const options = {\n    method: 'POST',\n    body: JSON.stringify(params),\n    headers: { 'content-type': 'application/json' },\n  };\n  // Use raw fetch instead of fetchJson to handle the NO_REFRESH_TOKEN case.\n  return fetch(url, options, false).then((response) => {\n    return response.json().then((json) => {\n      if (!response.ok) {\n        throw Error(json.error);  // Might be NO_REFRESH_TOKEN\n      }\n      return json.jwt;\n    });\n  });\n};\n\n\nconst router = express.Router();\n\n\nrouter.get('/sign-in', endpoint((req, res) => {\n  const { destination } = req.query;\n  req.session.destination = destination;\n\n  const url = oauth2Client.generateAuthUrl({\n    access_type: 'offline',\n    scope: INITIAL_SCOPES,\n  });\n\n  return res.redirect(url);\n}));\n\n\nrouter.get('/callback', endpoint((req, res) => {\n  const { code } = req.query;\n  const { destination } = req.session;\n\n  const tokensPromise = getTokensFromCode(code);\n  const scopesPromise = tokensPromise\n      .then(tokens => googleAuth.getTokenInfo(tokens.accessToken))\n      .then(tokenInfo => tokenInfo.scope.split(' '));\n  const profilePromise = tokensPromise\n      .then(tokens => googleAuth.getProfile(tokens.accessToken));\n\n  const promises = Promise.all([tokensPromise, scopesPromise, profilePromise]);\n\n  const jwtPromise = promises.then((values) => {\n    const [tokens, scopes, profile] = values;\n    const params = {\n      googleId: profile.id,\n      email: profile.emails[0].value,\n      name: profile.displayName,\n      scopes,\n      tokens,\n    };\n    return getJwtPromise(params);\n  });\n\n  return jwtPromise.then((jwt) => {\n    res.session = null;\n    res.cookie('jwt', jwt);\n    res.redirect(settings.clientServerUrl + destination);\n  }).catch((error) => {\n    if (error.message === NO_REFRESH_TOKEN) {\n      const forceRefreshUrl = oauth2Client.generateAuthUrl({\n        access_type: 'offline',\n        prompt: 'consent',\n        scope: INITIAL_SCOPES,\n      });\n      res.redirect(forceRefreshUrl);\n    }\n    // eslint-disable-next-line no-console\n    console.error('Error signing in: ', error);\n  });\n}));\n\nexport default router;\n\n\n\n// WEBPACK FOOTER //\n// ./server/routes/auth.js","// Permissions for third-party services.\n\n// We do this here instead of in scout-service because we cannot pass JWT to\n\nimport crypto from 'crypto';\nimport express from 'express';\nimport google from 'googleapis';\nimport queryString from 'query-string';\nimport request from 'request';\n\nimport * as googleAuth from '../infra/google-auth';\nimport { endpoint, fetchJson } from '../infra/net';\n\nimport settings from '../../settings';\n\n\nconst OAuth2 = google.auth.OAuth2;\n\n\n// Permissions for third-party services.\n\n\nconst router = express.Router();\n\n\nconst setPermission = (jwt, provider, providerInfo) => {\n  const params = {\n    scoutWebServerSecret: settings.keys.scoutWebServerSecret,\n    provider,\n    providerInfo,\n  };\n  const options = {\n    method: 'PATCH',\n    body: JSON.stringify(params),\n    headers: {\n      'content-type': 'application/json',\n      authorization: `Scout JWT ${jwt}`,\n    },\n  };\n  const url = `${settings.scoutServiceUrl}/api/permissions/`;\n  return fetchJson(url, options).then(() => ({}));\n};\n\n\n// Google permissions.\n\n\nconst redirectPath = '/permissions/callback/google';\nconst oauth2Client = new OAuth2(\n  settings.keys.google_clientId,\n  settings.keys.google_clientSecret,\n  settings.serverUrl + redirectPath,\n);\nconst getTokensFromCode = googleAuth.getTokensFromCode(oauth2Client);\n\nrouter.get('/google', endpoint((req, res) => {\n  const { destination, providerInfo } = req.query;\n\n  req.session.destination = destination;\n  req.session.jwt = req.cookies.jwt;\n  req.session.savedState = crypto.randomBytes(20).toString('hex');\n\n  const scopes = JSON.parse(providerInfo).scopes;\n\n  const url = oauth2Client.generateAuthUrl({\n    access_type: 'offline',\n    prompt: 'consent',\n    scope: scopes,\n    state: req.session.savedState,\n  });\n\n  return res.redirect(url);\n}));\n\n// Note: Does NOT require an auth header.\nrouter.get('/callback/google', endpoint((req, res) => {\n  const { code, error, state } = req.query;\n\n  const { jwt, destination, savedState } = req.session;\n  req.session = null;\n\n  const next = () => res.redirect(settings.clientServerUrl + destination);\n  if (error || savedState !== state) {\n    next();\n  }\n\n  const tokensPromise = getTokensFromCode(code);\n  const tokenInfoPromise = tokensPromise\n      .then(tokens => googleAuth.getTokenInfo(tokens.accessToken));\n  const promises = Promise.all([tokensPromise, tokenInfoPromise]);\n\n  const permissionPromise = promises.then((values) => {\n    const [tokens, tokenInfo] = values;\n    const providerInfo = {\n      scopes: tokenInfo.scope.split(' '),\n      accessToken: tokens.accessToken,\n      refreshToken: tokens.refreshToken,\n      accessTokenExpiration: tokens.accessTokenExpiration,\n    };\n    return setPermission(jwt, 'google', providerInfo);\n  });\n\n  return permissionPromise.then(next).catch(next);\n}));\n\n\n// Dropbox permissions.\n\nconst dropboxRedirectUri = `${settings.serverUrl}/permissions/callback/dropbox`;\nrouter.get('/dropbox', endpoint((req, res) => {\n  const { destination } = req.query;\n\n  req.session.destination = destination;\n  req.session.jwt = req.cookies.jwt;\n  req.session.savedState = crypto.randomBytes(20).toString('hex');\n\n  const params = {\n    client_id: settings.keys.dropbox_clientId,\n    redirect_uri: dropboxRedirectUri,\n    response_type: 'code',\n    state: req.session.savedState,\n  };\n  const stringified = queryString.stringify(params);\n  const url = `https://www.dropbox.com/oauth2/authorize?${stringified}`;\n\n  return res.redirect(url);\n}));\n\n// Note: Does NOT require an auth header.\nrouter.get('/callback/dropbox', endpoint((req, res) => {\n  const { code, state, error } = req.query;\n\n  const { jwt, destination, savedState } = req.session;\n  req.session = null;\n\n  const destinationUrl = settings.clientServerUrl + destination;\n  if (error || savedState !== state) {\n    res.redirect(destinationUrl);\n  }\n\n\n  const tokenPromise = new Promise((resolve, reject) => {\n    request.post('https://api.dropbox.com/1/oauth2/token', {\n      form: {\n        code,\n        grant_type: 'authorization_code',\n        redirect_uri: dropboxRedirectUri,\n      },\n      auth: {\n        user: settings.keys.dropbox_clientId,\n        pass: settings.keys.dropbox_clientSecret,\n      },\n    }, (reqError, response, body) => {\n      if (reqError) {\n        reject(reqError);\n        return;\n      }\n      resolve(JSON.parse(body));\n    });\n  });\n\n  return tokenPromise\n      .then((token) => {\n        const providerInfo = {\n          accessToken: token.access_token,\n          accountId: token.account_id,\n        };\n        return setPermission(jwt, 'dropbox', providerInfo);\n      })\n      .then(() => res.redirect(destinationUrl))\n      .catch(err => res.redirect(`${destinationUrl}?error=${err}`));\n}));\n\nexport default router;\n\n\n\n// WEBPACK FOOTER //\n// ./server/routes/permissions.js","module.exports = {\n\t\"dark_sky\": \"61ae0da07a6ba575cf52b3a183bbcbbd\",\n\t\"gmaps\": \"AIzaSyCaXnRt4J82cRuseQR98IngQJRyMJCPnWw\",\n\t\"nyt\": \"3060d0e08cb9494f8ff10db9461552f6\",\n\t\"google_clientId\": \"447160699625-cuvgvmtcfpl1c1jehq9dntcd1sgomi3g.apps.googleusercontent.com\",\n\t\"google_clientSecret\": \"1dhLvo_grF0yCM_XVM8OyogN\",\n\t\"google_apiKey\": \"AIzaSyCaXnRt4J82cRuseQR98IngQJRyMJCPnWw\",\n\t\"dropbox_clientId\": \"dg3od5r6l2xuy1a\",\n\t\"dropbox_clientSecret\": \"1at9hla0qjies73\",\n\t\"jwtSecret\": \"cNWBAsajXfBhbFZ0sQsGfQVkIlzslJh5WEmOEDOts421O7AvEsVfyVuihTb\",\n\t\"scoutWebServerSecret\": \"sSkCNyf93qA5ZNG9GHbBDFTMLrWx9DMjRodCN9oFb90hicys06zj8lmxbbvA\",\n\t\"scoutWebSessionKey\": \"CtBjTxYgz6cMCeaMXNYFrfGa5WTcQwgNs7C0T2JYEzcURmzXuwMXUc1e8IRptHkBKDHTR0rTvllNBxhP\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./keys/keys.json\n// module id = 9\n// module chunks = 0","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 10\n// module chunks = 0","module.exports = require(\"cookie-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cookie-parser\"\n// module id = 11\n// module chunks = 0","module.exports = require(\"cookie-session\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cookie-session\"\n// module id = 12\n// module chunks = 0","module.exports = require(\"crypto\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"crypto\"\n// module id = 13\n// module chunks = 0","module.exports = require(\"isomorphic-fetch\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"isomorphic-fetch\"\n// module id = 14\n// module chunks = 0","module.exports = require(\"morgan\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"morgan\"\n// module id = 15\n// module chunks = 0","module.exports = require(\"query-string\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"query-string\"\n// module id = 16\n// module chunks = 0","module.exports = require(\"request\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"request\"\n// module id = 17\n// module chunks = 0"],"sourceRoot":""}